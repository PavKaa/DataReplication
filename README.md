# DataReplicationByKafka
Простое приложение ASP.NET, использующее Kafka для репликации данных, посредством отправления данных при добавлении сущностей на второй экземпляр пары api + база данных с целью простого копирования вставляемых данных на двух базах данных. Весь проект собран в Docker.

## Содержание
1. [Используемые технологии](#используемые-технологии)
2. [Запуск](#запуск)
3. [Использование](#использование)
    - [Доступные порты](#доступные-порты)
    - [Модели данных](#модели-данных)
    - [Endpoints api](#endpoints-api)
4. [Заключение](#заключение)

## Используемые технологи
- C#, .NET, ASP.NET
- PostgreSQL
- Kafka
- Zookeeper
- Docker

## Запуск
Для запуска небходимо клонировать репозиторий:
```git clone https://github.com/PavKaa/DataReplication.git```
Также требуется docker. Перейдите в директорию с проектом, введите команду:
```docker-compose up```

## Использование
Здесь описана краткая информация, полезная для использования: порты, на которых работают элементы системы, модели данных, api.

### Доступные порты
- [host]:8080 - порт для внешнего обращения к первому api
- [host]:8081 - порт для внешнего обращения ко второму api
- [host]:8090 - порт для внешнего обращения к графическому интерфейсу kafka

### Модели данных
Здесь перечислены модели, которыми оперирует приложение.

#### Person
Сущность, представляющая сотрудника, его почту и пароль.
| Поле        | Тип данных | Описание                               |
|-------------|------------|----------------------------------------|
| Id          | int        | Уникальный идентификатор               |
| Email       | string     | Почта сотрудника                       |
| Password    | string     | Пароль сотрудника(в виде хеш-значения) |

#### PersonDTO
Сущность, представляющая модель сотрудника при создании.
| Поле        | Тип данных | Описание                               |
|-------------|------------|----------------------------------------|
| Email       | string     | Почта сотрудника                       |
| Password    | string     | Пароль сотрудника(в виде хеш-значения) |

#### PersonData
Сущность, представляющая информацию о сотруднике, его им, фамилию, дату рождения.
| Поле        | Тип данных | Описание                               |
|-------------|------------|----------------------------------------|
| Id          | int        | Уникальный идентификатор               |
| Firstname   | string     | Имя сотрудника                         |
| Lastname    | string     | Фамилия сотрудника                     |
| Birthday    | DateOnly   | Дата рождения сотрудника               |
| PersonId    | int        | Уникальный идентификатор сотрудника    |

#### PersonDataDTO
Сущность, представляющая модель информации о сотруднике при создании.
| Поле        | Тип данных | Описание                               |
|-------------|------------|----------------------------------------|
| Firstname   | string     | Имя сотрудника                         |
| Lastname    | string     | Фамилия сотрудника                     |
| Birthday    | string     | Дата рождения сотрудника               |
| Email       | string     | Почта сотрудника                       |

#### ProjectTask
Сущность, представляющая модель задачи для сотрудника при создании.
| Поле        | Тип данных | Описание                                         |
|-------------|------------|--------------------------------------------------|
| Description | string     | Описание задачи                                  |
| TimeStart   | string     | Дата старта работы над задачей                   |
| TimeEnd     | string?    | Дата окончания работы над задачей(необязательно) |
| Email       | string     | Почта сотрудника                                 |

#### ProjectTask
Сущность, представляющая задачу для сотрудника: описание задачи, ее сроки.
| Поле        | Тип данных | Описание                                         |
|-------------|------------|--------------------------------------------------|
| Id          | int        | Уникальный идентификатор                         |
| Description | string     | Описание задачи                                  |
| TimeStart   | DateOnly   | Дата старта работы над задачей                   |
| TimeEnd     | DateOnly?  | Дата окончания работы над задачей(необязательно) |
| PersonId    | int        | Уникальный идентификатор сотрудника              |

### Endpoints api
Здесь перечислены методы api, возвращаемые и передаваемые данные

#### Добавление нового сотрудника
 - `POST`
 - `/api/person`
 - Передаваемые данные в теле запроса: [PersonDTO](#persondto)
 - Возвращаемые данные: [Person](#person)
 - Возможные коды ответа:
    - **201 Created**: Успешный запрос, новый сотрудник создан
    - **400 Bad Request**: Некорректный запрос (например, неправильные параметры)
    - **500 Internal Server Error**: Внутренняя ошибка сервера

#### Получение всех сотрудников
 - `GET`
 - `/api/person`
 - Возвращаемые данные: список [Person](#person)
 - Возможные коды ответа:
    - **200 OK**: Успешный запрос, получен список всех сотрудников
    - **500 Internal Server Error**: Внутренняя ошибка сервера

#### Добавление новой информации о сотруднике
 - `POST`
 - `/api/persondata`
 - Передаваемые данные в теле запроса: [PersonDataDTO](#persondatadto)
 - Возвращаемые данные: [PersonData](#persondata)
 - Возможные коды ответа:
    - **201 Created**: Успешный запрос, новая информация о сотруднике добавлена
    - **400 Bad Request**: Некорректный запрос (например, неправильные параметры)
    - **500 Internal Server Error**: Внутренняя ошибка сервера

#### Получение информации о всех сотрудниках
 - `GET`
 - `/api/persondata`
 - Возвращаемые данные: список [PersonData](#persondata)
 - Возможные коды ответа:
    - **200 OK**: Успешный запрос, получение списка информации о всех сотрудниках
    - **500 Internal Server Error**: Внутренняя ошибка сервера

#### Добавление новой задачи для сотрудника
 - `POST`
 - `/api/projecttask`
 - Передаваемые данные в теле запроса: [ProjectTaskDTO](#projecttaskdto)
 - Возвращаемые данные: [ProjectTask](#projecttask)
 - Возможные коды ответа:
    - **201 Created**: Успешный запрос, новая задача для сотрудника добавлена
    - **400 Bad Request**: Некорректный запрос (например, неправильные параметры)
    - **500 Internal Server Error**: Внутренняя ошибка сервера

#### Получение всех задач для сотрудников
 - `GET`
 - `/api/projecttask`
 - Возвращаемые данные: список [ProjectTask](#projecttask)
 - Возможные коды ответа:
    - **200 OK**: Успешный запрос, получен список всех задач для сотрудников
    - **500 Internal Server Error**: Внутренняя ошибка сервера

## Заключение
Простое приложение, демонстрирующее возможности kafka. Из недочетов к исправлению: лучшая валидация данных, добавление изменения и удаления сущностей.